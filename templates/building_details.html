{% extends 'base.html' %}

{% block title %}{{ building.building_housenumber }} {{ building.building_streetname|title }} - Details{% endblock %}

{% block body %}
<h1>{{ building.building_housenumber }} {{ building.building_streetname }}</h1>
    <br>
    <br>
    <div class="violation-group" >
    {% if violation_list %}

        <h2>{{ length_violation_list }} Violation(s) at this address</h2>
        <br>

        <div class="violation-list" id="first-two-violations">
            <div>
            {% for violation in violation_list %}

                    {% if loop.index<= 2 %}
                        <dl class="row">

                            <h4>Details for Violation #{{ violation.violationid }}</h4>
            
                            <dt class="col-12">Violation Date</dt>
                            <dd class="col-12">{{ violation.inspectiondate }}</dd>
                            <dt class="col-12">Violation Class</dt> 
                            <dd class="col-12">{{ violation.violation_class }}</dd>
                            <dt class="col-12">Description of Violation:</dt>
                            <dd class="col-12">{{ violation.novdescription }}</dd>
                            
                        </dl>
                    
                    {% endif %}

            {% endfor %}
            </div>
        </div>
        <div>
        <div class="row">
            <div class="col-2">
                <button id="show_more_violations" class="btn btn-outline-secondary">
                    Show More Violations</button>
            </div>
            <div class="col-2">
                <button id="show_fewer_violations" class="btn btn-outline-secondary">
                    Show Fewer Violations</button>
            </div>
            <div class="col-4 offset-4">
                <button id="show_all_violations" class="btn btn-outline-dark">
                    Show All {{ length_violation_list }} Violations</button>
            </div>
        </div>  
        </div>
    {% endif %}
    </div>
    
<p>
    <h4>Landlord of {{ building.building_housenumber }} {{ building.building_streetname }}:</h4>
    Landlord Name: {{ building.landlord.landlord_name }}
    <br>
    Landlord Office Address: {{ building.landlord.office_address }}
    <br>
</p>
<p>
    <h4>Reviews of {{ building.building_housenumber }} {{ building.building_streetname }}:</h4>
        {% if building.reviews %}
            {% for review in building.reviews %}
                <li>Review Text: {{ review.review_body }}</li>
                {% endfor %}
        {% else %}
            <li>No Reviews </li>
        {% endif %}
</p>

<!-- Connect to JS file -->
<script src="/static/js/building_details.js"></script>

{% endblock %}